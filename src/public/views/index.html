<!-- Autor => Daniel Quesada Arias -->
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda.com - Favoritos</title>
    <link rel="stylesheet" href="/assets/css/main.css" />
    <script src="https://kit.fontawesome.com/07863389f0.js" crossorigin="anonymous"></script>
    <script type="module" src="/assets/js/views/productos/productos.js"></script>
    <!--script type="module" src="../assets/js/views/navBar/navBar.js"></script!-->
    <style>
        /* Styling for pop-up */
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            border: 1px solid #ccc;
            padding: 20px;
            z-index: 1000;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        .quantity-picker {
            display: flex;
            align-items: center;
        }
        .quantity-input {
            width: 50px;
            text-align: center;
        }
        .quantity-button {
            background-color: #f0f0f0;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>

<body id="root">

    
</body>
<body>
    <script>
        // JavaScript functions to open and close the pop-up
        function openPopup2(element) {
            var productId = element.getAttribute("product-id");
            var productLabel = element.getAttribute("product-label");
            var productPrice = element.getAttribute("product-price");
            var productDesc = element.getAttribute("product-desc");
            var productMax = element.getAttribute("product-max");

            // Here you can use productId in your popup or perform any other action
            var label = document.getElementById("product-label");
            var id = document.getElementById("product-id");
            var desc = document.getElementById("product-desc");
            var price = document.getElementById("product-price");
            var qty = document.getElementById("quantity-input");
            var max = document.getElementById("product-max");

            label.textContent = "Producto: " +  productLabel;
            id.textContent = productId;
            desc.textContent = "Descripcion:  " + productDesc;
            price.textContent = "Precio: " + productPrice;
            qty.value = 0;
            max.textContent = "Cantidad maxima en inventorio:" + productMax;

            document.getElementById("overlay").style.display = "block";
            document.getElementById("popup").style.display = "block";
        }

        function closePopup() {
            document.getElementById("overlay").style.display = "none";
            document.getElementById("popup").style.display = "none";
        }

        function addToCart(event) {
    
            var id = document.getElementById("product-id").textContent;
            var qty = document.getElementById("quantity-input").value;
            var label = document.getElementById("product-label").textContent;
            var price = document.getElementById("product-price").textContent;
            
            label = label.split("Producto: ")[1];
            price = price.split("Precio: ")[1];

            var cart = localStorage.getItem("cart");
            var array = []; 

            if (cart !== null ) {
                array = JSON.parse(cart);
            }

            array.push({
                "id": id,
                "qty": qty, 
                "name": label,
                "price": price
            });

            localStorage.setItem("cart", JSON.stringify(array));

            document.getElementById("overlay").style.display = "none";
            document.getElementById("popup").style.display = "none";
        }
    </script>       
</body>
</html>